<div>

  <div class="voffset4">
    <img class="img-responsive desaturate" ng-show="study.logo" ng-src="{{logoUrl}}">
  </div>

  <div sf-model="study.model" sf-form="sfForm.definition" sf-schema="sfForm.schema" sf-options="sfOptions"></div>

    <div class="row">
      <div class="col-md-6">
        <h3 translate>members</h3>

        <div class="table-responsive">
          <table class="table table-bordered table-striped">
          <tbody>
          <tr ng-repeat="role in roles">
            <th>{{'study.member-list' | translate: {type: role} }}</th>
            <td>
              <div ng-controller="ContactController">
                <ul ui-sortable="sortableOptions" ng-model="memberships[role]" class="list-unstyled sortable" ng-show="memberships[role].length">
                  <li ng-repeat="person in memberships[role]">
                    <a ng-click="viewContact(person)" title="{{'dnd-reorder' | translate}}">
                      {{person.title}} {{person.firstName}} {{person.lastName}}
                      {{person.academicLevel}}
                    <span ng-show="person.institution.name">
                      (<localized value="person.institution.name" lang="lang"></localized>)
                    </span>
                    </a>
                    <div class="inline" ng-if="inViewMode() && permissions.canEdit()">
                      <a ng-click="editMember(study, person, role)" class="action"><i class="fa fa-pencil"></i></a>
                      <a ng-click="deleteMember(study, person, role)" class="action"><i class="fa fa-trash-o"></i></a>
                    </div>
                  </li>
                </ul>
                <button type="button" class="btn btn-info btn-sm" ng-click="addMember(study, role)" ng-if="inViewMode() && permissions.canEdit()">
                  <i class="fa fa-plus"></i> <span>{{ 'study.add-member' | translate: {type: role} }}</span>
                </button>
              </div>
            </td>
          </tr>
          <tr ng-show="study.networks.length">
            <th translate>networks</th>
            <td>{{study.networks}}</td>
          </tr>
          </tbody>
        </table>
        </div>
      </div>
    </div>

    <div id="study-timeline">
      <h3 translate ng-show="study.populations.length">study.timeline</h3>
      <div id="timeline"></div>
    </div>

    <div id="study-populations">
      <h3>
        <span translate>study.populations</span>
      </h3>
      <a ng-click="addPopulation()" class="btn btn-info" ng-if="inViewMode() && permissions.canEdit()">
        <i class="fa fa-plus"></i> <span translate>study.add-population</span>
      </a>
      <div class="voffset2"></div>

      <div class="row" ng-show="study.populations.length>0">
        <div class="col-lg-2 col-xs-12">
          <ul class="nav nav-pills nav-stacked">
            <li ng-repeat="population in study.populations" ng-class="population === selectedPopulation ? 'active' : ''">
              <a href ng-click="selectPopulation(population)">
                <span class="badge">{{population.id}}</span>
                <localized value="population.name" lang="selectedLocale"></localized>
              </a>
            </li>
          </ul>
        </div>
        <div class="col-lg-10 col-xs-12">
          <div ng-include="'app/study/views/population/population-view.html'"></div>
        </div>
      </div>

    </div>
</div>
